{"componentChunkName":"component---src-templates-post-tsx","path":"/2018-06-2-Founds/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"create_filter---memory-leak\" style=\"position:relative;\"><a href=\"#create_filter---memory-leak\" aria-label=\"create_filter   memory leak permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>create_filter - memory leak</h2>\n<p>Found on LK v4.17.x.</p>\n<h3 id=\"kmemleak-message\" style=\"position:relative;\"><a href=\"#kmemleak-message\" aria-label=\"kmemleak message permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kmemleak message</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">unreferenced object <span class=\"token number\">0</span><span class=\"token function\">xffff880069abee18</span> <span class=\"token punctuation\">(</span>size <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n  comm <span class=\"token string\">\"poc\"</span><span class=\"token punctuation\">,</span> pid <span class=\"token number\">14081</span><span class=\"token punctuation\">,</span> jiffies <span class=\"token number\">4294976277</span> <span class=\"token punctuation\">(</span>age <span class=\"token number\">10.671</span>s<span class=\"token punctuation\">)</span>\n  hex <span class=\"token function\">dump</span> <span class=\"token punctuation\">(</span>first <span class=\"token number\">8</span> bytes<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n    <span class=\"token number\">02</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span>                          <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n  backtrace<span class=\"token operator\">:</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000f</span><span class=\"token number\">15</span>d2c1d<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> create_filter<span class=\"token operator\">+</span><span class=\"token number\">0xa6</span><span class=\"token operator\">/</span><span class=\"token number\">0x250</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000</span>be54913e<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> ftrace_profile_set_filter<span class=\"token operator\">+</span><span class=\"token number\">0x119</span><span class=\"token operator\">/</span><span class=\"token number\">0x2b0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">0000000006f</span><span class=\"token number\">0</span>d3d0<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> _perf_ioctl<span class=\"token operator\">+</span><span class=\"token number\">0x1134</span><span class=\"token operator\">/</span><span class=\"token number\">0x1ab0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000505</span>ea0fc<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> perf_ioctl<span class=\"token operator\">+</span><span class=\"token number\">0x54</span><span class=\"token operator\">/</span><span class=\"token number\">0x80</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000</span>dfc7d1ee<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> do_vfs_ioctl<span class=\"token operator\">+</span><span class=\"token number\">0x1c6</span><span class=\"token operator\">/</span><span class=\"token number\">0x15f0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000482ff</span>db2<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> ksys_ioctl<span class=\"token operator\">+</span><span class=\"token number\">0x9b</span><span class=\"token operator\">/</span><span class=\"token number\">0xc0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000082e2070</span><span class=\"token operator\">></span><span class=\"token punctuation\">]</span> __x64_sys_ioctl<span class=\"token operator\">+</span><span class=\"token number\">0x6f</span><span class=\"token operator\">/</span><span class=\"token number\">0xb0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">000000005</span>a913096<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> do_syscall_64<span class=\"token operator\">+</span><span class=\"token number\">0x165</span><span class=\"token operator\">/</span><span class=\"token number\">0x670</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">0000000065</span>ee7513<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> entry_SYSCALL_64_after_hwframe<span class=\"token operator\">+</span><span class=\"token number\">0x49</span><span class=\"token operator\">/</span><span class=\"token number\">0xbe</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">000000005</span>b168a0c<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> <span class=\"token number\">0xffffffffffffffff</span></code></pre></div>\n<h2 id=\"pcpucreatechunk---memory-leak\" style=\"position:relative;\"><a href=\"#pcpucreatechunk---memory-leak\" aria-label=\"pcpucreatechunk   memory leak permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pcpu<em>create</em>chunk - memory leak</h2>\n<p>Found on LK v4.17.x.</p>\n<h3 id=\"kmemleak-message-1\" style=\"position:relative;\"><a href=\"#kmemleak-message-1\" aria-label=\"kmemleak message 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kmemleak message</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">unreferenced object <span class=\"token number\">0</span><span class=\"token function\">xffffc90000538000</span> <span class=\"token punctuation\">(</span>size <span class=\"token number\">8192</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n  comm <span class=\"token string\">\"poc\"</span><span class=\"token punctuation\">,</span> pid <span class=\"token number\">10557</span><span class=\"token punctuation\">,</span> jiffies <span class=\"token number\">4294785036</span> <span class=\"token punctuation\">(</span>age <span class=\"token number\">9.722</span>s<span class=\"token punctuation\">)</span>\n  hex <span class=\"token function\">dump</span> <span class=\"token punctuation\">(</span>first <span class=\"token number\">32</span> bytes<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n    <span class=\"token number\">00</span> <span class=\"token number\">04</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">04</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">04</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span>  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">04</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">04</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span>  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n  backtrace<span class=\"token operator\">:</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000</span>ec587bbf<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> __vmalloc<span class=\"token operator\">+</span><span class=\"token number\">0x63</span><span class=\"token operator\">/</span><span class=\"token number\">0x80</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">0000000047066f</span><span class=\"token number\">5</span>b<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> pcpu_mem_zalloc<span class=\"token operator\">+</span><span class=\"token number\">0x89</span><span class=\"token operator\">/</span><span class=\"token number\">0xd0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000</span>a75fa3be<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> pcpu_create_chunk<span class=\"token operator\">+</span><span class=\"token number\">0x211</span><span class=\"token operator\">/</span><span class=\"token number\">0x960</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">0000000088</span>bef858<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> pcpu_alloc<span class=\"token operator\">+</span><span class=\"token number\">0xf1b</span><span class=\"token operator\">/</span><span class=\"token number\">0x12b0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">0000000071</span>dc4e5e<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> array_map_alloc<span class=\"token operator\">+</span><span class=\"token number\">0x4f3</span><span class=\"token operator\">/</span><span class=\"token number\">0x5f0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000</span>b61a2dcb<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> map_create<span class=\"token operator\">+</span><span class=\"token number\">0x3ab</span><span class=\"token operator\">/</span><span class=\"token number\">0xee0</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000006870</span>c4<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> __x64_sys_bpf<span class=\"token operator\">+</span><span class=\"token number\">0x2a9</span><span class=\"token operator\">/</span><span class=\"token number\">0x470</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">00000000</span>bb572e98<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> do_syscall_64<span class=\"token operator\">+</span><span class=\"token number\">0x165</span><span class=\"token operator\">/</span><span class=\"token number\">0x670</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">000000003</span>a252153<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> entry_SYSCALL_64_after_hwframe<span class=\"token operator\">+</span><span class=\"token number\">0x49</span><span class=\"token operator\">/</span><span class=\"token number\">0xbe</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span><span class=\"token number\">000000006f</span><span class=\"token number\">02</span>ac52<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> <span class=\"token number\">0xffffffffffffffff</span></code></pre></div>\n<h2 id=\"set_precision---warning\" style=\"position:relative;\"><a href=\"#set_precision---warning\" aria-label=\"set_precision   warning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>set_precision - warning</h2>\n<p>Got from syzkaller &#x26; Found in LK v4.17.0+.</p>\n<h3 id=\"call-trace-dump\" style=\"position:relative;\"><a href=\"#call-trace-dump\" aria-label=\"call trace dump permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Call Trace (Dump)</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nprecision <span class=\"token number\">1047645</span> too large\nWARNING<span class=\"token operator\">:</span> CPU<span class=\"token operator\">:</span> <span class=\"token number\">0</span> PID<span class=\"token operator\">:</span> <span class=\"token number\">12208</span> at lib<span class=\"token operator\">/</span>vsprintf<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">2164</span> set_precision<span class=\"token operator\">+</span><span class=\"token number\">0xb8</span><span class=\"token operator\">/</span><span class=\"token number\">0xe0</span> lib<span class=\"token operator\">/</span>vsprintf<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">2164</span>\nKernel panic <span class=\"token operator\">-</span> not syncing<span class=\"token operator\">:</span> panic_on_warn set <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\nCPU<span class=\"token operator\">:</span> <span class=\"token number\">0</span> PID<span class=\"token operator\">:</span> <span class=\"token number\">12208</span> Comm<span class=\"token operator\">:</span> syz<span class=\"token operator\">-</span>executor14 Not tainted <span class=\"token number\">4.17</span><span class=\"token number\">.0</span><span class=\"token operator\">+</span> #<span class=\"token number\">9</span>\nHardware name<span class=\"token operator\">:</span> QEMU Standard <span class=\"token function\">PC</span> <span class=\"token punctuation\">(</span>i440FX <span class=\"token operator\">+</span> PIIX<span class=\"token punctuation\">,</span> <span class=\"token number\">1996</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> BIOS <span class=\"token number\">1.10</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span><span class=\"token number\">1u</span>buntu1 <span class=\"token number\">04</span><span class=\"token operator\">/</span><span class=\"token number\">01</span><span class=\"token operator\">/</span><span class=\"token number\">2014</span>\nCall Trace<span class=\"token operator\">:</span>\nDumping ftrace buffer<span class=\"token operator\">:</span>\n   <span class=\"token punctuation\">(</span>ftrace buffer empty<span class=\"token punctuation\">)</span>\nKernel Offset<span class=\"token operator\">:</span> <span class=\"token number\">0x8200000</span> from <span class=\"token number\">0</span><span class=\"token function\">xffffffff81000000</span> <span class=\"token punctuation\">(</span>relocation range<span class=\"token operator\">:</span> <span class=\"token number\">0xffffffff80000000</span><span class=\"token operator\">-</span><span class=\"token number\">0xffffffffbfffffff</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>","excerpt":"create_filter - memory leak Found on LK v4.17.x. kmemleak message pcpucreatechunk - memory leak Found on LK v4.17.x. kmemleak message set_p…","tableOfContents":"<ul>\n<li>\n<p><a href=\"/2018-06-2-Founds/#create_filter---memory-leak\">create_filter - memory leak</a></p>\n<ul>\n<li><a href=\"/2018-06-2-Founds/#kmemleak-message\">kmemleak message</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2018-06-2-Founds/#pcpucreatechunk---memory-leak\">pcpu<em>create</em>chunk - memory leak</a></p>\n<ul>\n<li><a href=\"/2018-06-2-Founds/#kmemleak-message-1\">kmemleak message</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2018-06-2-Founds/#set_precision---warning\">set_precision - warning</a></p>\n<ul>\n<li><a href=\"/2018-06-2-Founds/#call-trace-dump\">Call Trace (Dump)</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/2018-06-2-Founds/"},"frontmatter":{"title":"Linux Kernel - 2018-06-2 Founds","date":"Jun 12, 2018","tags":["Security","Linux-Kernel"],"keywords":["0-day","Bug"],"update":"Jun 14, 2018"},"timeToRead":2}},"pageContext":{"slug":"/2018-06-2-Founds/","series":[],"lastmod":"2018-06-14"}},"staticQueryHashes":["2027115977","694178885"]}